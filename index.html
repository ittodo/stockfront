<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>거래내역서 PDF → CSV 변환기 (프론트엔드 전용)</title>
  <link rel="icon" href="data:," />
  <script type="module" crossorigin src="./assets/index-BK2N4yrT.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/index-BcGkA-jF.css">
</head>
<body>
  <header>
    <h1>거래내역서 PDF → CSV 변환기</h1>
    <p class="tagline">로컬에서만 동작 · 업로드 없음 · 여러 PDF 한번에 파싱</p>
  </header>

  <main>
    <section class="uploader">
      <label class="file-label">
        <input id="file-input" type="file" accept="application/pdf,.pdf,text/csv,.csv" multiple />
        <span>PDF 선택하기</span>
      </label>
      <div id="dropzone" class="dropzone" tabindex="0" aria-label="파일 드롭 영역">
        여기로 PDF 파일을 드래그 앤 드롭 하세요
      </div>
      <div class="controls">
        <button id="parse-btn" class="primary" disabled>파싱 시작</button>
        <button id="download-btn" class="secondary" disabled>CSV 다운로드</button>
        <button id="download-raw-btn" class="secondary" disabled>원본 CSV (중복 제거 전)</button>
        <button id="download-text-btn" class="secondary" disabled>원문 텍스트 다운로드</button>
        <label class="opt">
          <input id="include-source" type="checkbox" checked />
          CSV에 <code>source_file</code> 열 포함
        </label>
      </div>
      <div id="status" class="status" role="status"></div>
    </section>

    <section class="preview">
      <h2>미리보기</h2>
      <div id="preview-table" class="table-wrap"></div>
      <div id="dedupe-info" class="dedupe-info" aria-live="polite"></div>
      <div id="dedupe-removed" class="table-wrap"></div>
    </section>

    <section class="calendar-section">
      <h2>달력</h2>
      <div class="calendar-wrap">
        <div id="calendar" class="calendar">
          <div class="cal-header">
            <button id="prev-year" class="secondary" aria-label="이전 해">≪</button>
            <button id="prev-month" class="secondary" aria-label="이전 달">◀</button>
            <div id="month-label" class="month-label">YYYY.MM</div>
            <button id="next-month" class="secondary" aria-label="다음 달">▶</button>
            <button id="next-year" class="secondary" aria-label="다음 해">≫</button>
          </div>
          <div class="cal-weekdays">
            <div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div>
          </div>
          <div id="calendar-grid" class="cal-grid"></div>
        </div>
        <div id="day-details" class="day-details" aria-live="polite"></div>
        <div class="day-actions" style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap;">
          <button id="daily-csv-btn" class="secondary">전체 일자 합계 CSV</button>
          <button id="holdings-csv-btn" class="secondary">선택일 보유현황 CSV</button>
          <button id="snapshot-csv-btn" class="secondary">기간 보유현황(일자별) CSV</button>
          <button id="recon-csv-btn" class="secondary">현금 리콘(계산 vs 잔액) CSV</button>
        </div>
      </div>
    </section>

    <section class="summary-section">
      <h2>요약</h2>
      <div id="summary" class="summary">
        <div class="kpis">
          <div class="kpi clickable" id="kpi-transfer-in"><div class="label">이체 입금</div><div class="value" id="sum-transfer-in">0</div></div>
          <div class="kpi clickable" id="kpi-transfer-out"><div class="label">이체 출금</div><div class="value" id="sum-transfer-out">0</div></div>
          <div class="kpi clickable" id="kpi-transfer-net"><div class="label">이체 순입금</div><div class="value" id="sum-transfer-net">0</div></div>
          <div class="kpi clickable" id="kpi-dividend"><div class="label">배당금 입금(현금)</div><div class="value" id="sum-dividend">0</div></div>
          <div class="kpi clickable" id="kpi-interest"><div class="label">이자입금</div><div class="value" id="sum-interest">0</div></div>
          <div class="kpi clickable" id="kpi-other-in"><div class="label">기타 입금</div><div class="value" id="sum-other-in">0</div></div>
          <div class="kpi clickable" id="kpi-other-out"><div class="label">기타 출금</div><div class="value" id="sum-other-out">0</div></div>
          <div class="kpi clickable" id="kpi-fxout"><div class="label">환전(원화 출금·원/달러)</div><div class="value"><span id="sum-fxout-krw">0</span> / <span id="sum-fxout-usd">0</span></div></div>
          <div class="kpi clickable" id="kpi-fxin"><div class="label">환전(원화 입금·원/달러)</div><div class="value"><span id="sum-fxin-krw">0</span> / <span id="sum-fxin-usd">0</span></div></div>
        </div>
        <div class="holdings">
          <h3 style="margin:6px 0">종목별 구매/판매/보유 수량</h3>
          <label style="display:inline-flex;align-items:center;gap:6px;margin:4px 0 8px 0;color:#9ea7b3;font-size:13px">
            <input id="hide-zero-holdings" type="checkbox" /> 보유 0 숨기기
          </label>
          <table id="summary-symbols">
            <thead><tr><th>종목</th><th style="text-align:right">구매 수량</th><th style="text-align:right">판매 수량</th><th style="text-align:right">보유 수량</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="unclassified">
          <h3 style="margin:6px 0">미분류(파싱 실패)</h3>
          <table id="summary-unknown">
            <thead><tr><th>날짜</th><th>거래구분</th><th>종목/비고</th><th style="text-align:right">거래대금</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="day-actions" style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap;">
          <button id="summary-csv-btn" class="secondary">요약 CSV</button>
          <button id="unknown-csv-btn" class="secondary">미분류 CSV</button>
        </div>
        <div id="summary-details" class="summary-details"></div>
      </div>
    </section>
  </main>

  <footer>
    <!-- shared-footer.js will replace this content for consistency -->
  </footer>

</body>
</html>
